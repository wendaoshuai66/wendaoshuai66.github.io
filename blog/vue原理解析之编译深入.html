<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue åŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥ | å‰ç«¯æ—¥å¿—</title>
    <meta name="description" content="æ¬¢è¿è®¿é—®æˆ‘çš„å‰ç«¯æ—¥å¿—">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/hero.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.f48a6bab.css" as="style"><link rel="preload" href="/assets/js/app.7db32d51.js" as="script"><link rel="preload" href="/assets/js/2.1f0a0a54.js" as="script"><link rel="preload" href="/assets/js/47.b7479d5c.js" as="script"><link rel="prefetch" href="/assets/js/10.8bcbf328.js"><link rel="prefetch" href="/assets/js/11.98cbf51b.js"><link rel="prefetch" href="/assets/js/12.6f2040f7.js"><link rel="prefetch" href="/assets/js/13.cfc0ecb9.js"><link rel="prefetch" href="/assets/js/14.78a613d7.js"><link rel="prefetch" href="/assets/js/15.ce8a7d53.js"><link rel="prefetch" href="/assets/js/16.856a74ca.js"><link rel="prefetch" href="/assets/js/17.64e3fa34.js"><link rel="prefetch" href="/assets/js/18.3e7ddfff.js"><link rel="prefetch" href="/assets/js/19.2dee6f08.js"><link rel="prefetch" href="/assets/js/20.1d99c2cc.js"><link rel="prefetch" href="/assets/js/21.067f638b.js"><link rel="prefetch" href="/assets/js/22.e2b7fa3a.js"><link rel="prefetch" href="/assets/js/23.26b7cc38.js"><link rel="prefetch" href="/assets/js/24.d180d5c5.js"><link rel="prefetch" href="/assets/js/25.3694e56c.js"><link rel="prefetch" href="/assets/js/26.4adf545a.js"><link rel="prefetch" href="/assets/js/27.5360046e.js"><link rel="prefetch" href="/assets/js/28.fc75bc52.js"><link rel="prefetch" href="/assets/js/29.5992374f.js"><link rel="prefetch" href="/assets/js/3.4da69777.js"><link rel="prefetch" href="/assets/js/30.88906c2f.js"><link rel="prefetch" href="/assets/js/31.7b9217a6.js"><link rel="prefetch" href="/assets/js/32.bf017485.js"><link rel="prefetch" href="/assets/js/33.f4d745c7.js"><link rel="prefetch" href="/assets/js/34.8458c3b8.js"><link rel="prefetch" href="/assets/js/35.db879782.js"><link rel="prefetch" href="/assets/js/36.0f635906.js"><link rel="prefetch" href="/assets/js/37.7d8dcb7a.js"><link rel="prefetch" href="/assets/js/38.6ff78b15.js"><link rel="prefetch" href="/assets/js/39.e8711a2c.js"><link rel="prefetch" href="/assets/js/4.4379ec61.js"><link rel="prefetch" href="/assets/js/40.182f2dcf.js"><link rel="prefetch" href="/assets/js/41.0ce7c377.js"><link rel="prefetch" href="/assets/js/42.0208ef5f.js"><link rel="prefetch" href="/assets/js/43.beceba14.js"><link rel="prefetch" href="/assets/js/44.6779228d.js"><link rel="prefetch" href="/assets/js/45.20b1abd2.js"><link rel="prefetch" href="/assets/js/46.ddc68fa1.js"><link rel="prefetch" href="/assets/js/48.46413833.js"><link rel="prefetch" href="/assets/js/49.b9a3878a.js"><link rel="prefetch" href="/assets/js/5.c37a0a9f.js"><link rel="prefetch" href="/assets/js/50.6f312b15.js"><link rel="prefetch" href="/assets/js/51.3e8a26ff.js"><link rel="prefetch" href="/assets/js/52.32fe43d9.js"><link rel="prefetch" href="/assets/js/53.60b5f0aa.js"><link rel="prefetch" href="/assets/js/54.a04de6c7.js"><link rel="prefetch" href="/assets/js/55.41724eea.js"><link rel="prefetch" href="/assets/js/56.255fb40a.js"><link rel="prefetch" href="/assets/js/57.f8c15ae2.js"><link rel="prefetch" href="/assets/js/58.501812a4.js"><link rel="prefetch" href="/assets/js/59.b288577c.js"><link rel="prefetch" href="/assets/js/6.bce38e64.js"><link rel="prefetch" href="/assets/js/7.aa4106f1.js"><link rel="prefetch" href="/assets/js/8.30b1c27a.js"><link rel="prefetch" href="/assets/js/9.9129683e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f48a6bab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å‰ç«¯æ—¥å¿—</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  åšå®¢
</a></div> <a href="https://github.com/wendaoshuai66/blogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  åšå®¢
</a></div> <a href="https://github.com/wendaoshuai66/blogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯åŸºç¡€</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/unknowHtml1.html" class="sidebar-link">ä½ ä¸çŸ¥é“çš„ HTML</a></li><li><a href="/blog/cssnote.html" class="sidebar-link">CSS ç®€ä»‹åŠå®ç”¨æŠ€å·§</a></li><li><a href="/blog/3d.html" class="sidebar-link">CSS3 æ„é€  3D ä¸–ç•Œ</a></li><li><a href="/blog/jsFunctionalProgramming_bottom.html" class="sidebar-link">JavaScript å‡½æ•°å¼ç¼–ç¨‹--ä¸‹</a></li><li><a href="/blog/jsFunctionalProgramming.html" class="sidebar-link">JavaScript å‡½æ•°å¼ç¼–ç¨‹--ä¸Š</a></li><li><a href="/blog/å‰ç«¯ä¸­ç»å¸¸å‡ºç°çš„é”™è¯¯åŠæ•è·.html" class="sidebar-link">å‰ç«¯ä¸­ç»å¸¸å‡ºç°çš„é”™è¯¯åŠæ•è·</a></li><li><a href="/blog/æ·±æ‹·è´.html" class="sidebar-link">å¯¹æ·±æ‹·è´çš„ç ”ç©¶</a></li><li><a href="/blog/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/blog/php_up.html" class="sidebar-link">PHP ä¸ MySQL å¼€å‘å…¥é—¨ä¸Š</a></li><li><a href="/blog/php_middle.html" class="sidebar-link">Php ä¸ MySql å¼€å‘å…¥é—¨ä¸­</a></li><li><a href="/blog/php_down.html" class="sidebar-link">Php ä¸ MySql å¼€å‘å…¥é—¨ä¸‹</a></li><li><a href="/blog/ES5_top.html" class="sidebar-link">ECMAScript5.1 æ–°å¢è¯­æ³•ä¸Š</a></li><li><a href="/blog/ES5_bottom.html" class="sidebar-link">ECMAScript5.1 æ–°å¢è¯­æ³•ä¸‹</a></li><li><a href="/blog/ES5_core.html" class="sidebar-link">ES5 çš„æ ¸å¿ƒæŠ€æœ¯</a></li><li><a href="/blog/ES5_core1.html" class="sidebar-link">ä¸çŸ¥é“çš„ JavaScript</a></li><li><a href="/blog/JavaScriptæ‰§è¡Œå †æ ˆæ¢ç´¢.html" class="sidebar-link">JavaScript æ‰§è¡Œå †æ ˆæ¢ç´¢</a></li><li><a href="/blog/Interview.html" class="sidebar-link">é¢è¯•é¢˜ç§¯ç´¯ 1</a></li><li><a href="/blog/é¢å‘åˆ‡é¢.html" class="sidebar-link">é¢å‘åˆ‡é¢åˆæ¢</a></li><li><a href="/blog/system.html" class="sidebar-link">åˆæ¢ System.js</a></li><li><a href="/blog/å‰ç«¯æ¶æ„ä¸æ€§èƒ½ä¼˜åŒ–é‚£äº›äº‹.html" class="sidebar-link">å‰ç«¯æ¶æ„ä¸æ€§èƒ½ä¼˜åŒ–é‚£äº›äº‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>å‰ç«¯æ¡†æ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/vueåŸç†è§£æä¹‹å‡†å¤‡å·¥ä½œ.html" class="sidebar-link">vue åŸç†è§£æä¹‹å‡†å¤‡å·¥ä½œ</a></li><li><a href="/blog/vueåŸç†è§£æä¹‹æ•°æ®é©±åŠ¨.html" class="sidebar-link">vue åŸç†è§£æä¹‹æ•°æ®é©±åŠ¨</a></li><li><a href="/blog/vueåŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥.html" class="active sidebar-link">vue åŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/vueåŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥.html#ç¼–è¯‘å…¥å£" class="sidebar-link">ç¼–è¯‘å…¥å£</a></li><li class="sidebar-sub-header"><a href="/blog/vueåŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥.html#parse" class="sidebar-link">parse</a></li></ul></li><li><a href="/blog/vueåŸç†è§£æä¹‹å“åº”å¼åŸç†æ·±å…¥.html" class="sidebar-link">vue åŸç†è§£æä¹‹å“åº”å¼åŸç†æ·±å…¥</a></li><li><a href="/blog/ç®€å•çš„å®ç°Vueä¹‹å“åº”å¼.html" class="sidebar-link">ç®€å•çš„å®ç° Vue ä¹‹å“åº”å¼</a></li><li><a href="/blog/vueåŸç†è§£æä¹‹nextTickæ¢ç´¢.html" class="sidebar-link">vue åŸç†è§£æä¹‹ nextTick æ¢ç´¢</a></li><li><a href="/blog/Webpack.html" class="sidebar-link">å¸¸ç”¨çš„å‰ç«¯æ„å»ºå·¥å…·-Webpack</a></li><li><a href="/blog/Webpackä½¿ç”¨æ€»ç»“.html" class="sidebar-link">Webpack ä½¿ç”¨æ€»ç»“</a></li><li><a href="/blog/Webpackç³»åˆ—æ‰‹å†™æ¨¡å—æ‰“åŒ…ä»£ç .html" class="sidebar-link">Webpack ç³»åˆ—æ‰‹å†™æ¨¡å—æ‰“åŒ…ä»£ç </a></li><li><a href="/blog/Reactå…¥é—¨å¿…å­¦[ä¸Š].html" class="sidebar-link">React å…¥é—¨å¿…å­¦ã€ä¸Šã€‘</a></li><li><a href="/blog/Reactå…¥é—¨å¿…å­¦[ä¸‹].html" class="sidebar-link">React å…¥é—¨å¿…å­¦ã€ä¸‹ã€‘</a></li><li><a href="/blog/ReduxåŸç†.html" class="sidebar-link">æ¢ç´¢ Redux åŸç†</a></li><li><a href="/blog/TypeScriptä½¿ç”¨æ‰‹å†Œ.html" class="sidebar-link">TypeScript ä½¿ç”¨æ‰‹å†Œ</a></li><li><a href="/blog/NodeJSå…¥é—¨.html" class="sidebar-link">NodeJS å…¥é—¨</a></li><li><a href="/blog/NodeJSæ¡†æ¶å…¥é—¨.html" class="sidebar-link">NodeJs æ¡†æ¶å…¥é—¨</a></li><li><a href="/blog/NodeJSä½¿ç”¨çš„æ€»ç»“.html" class="sidebar-link">NodeJS ä½¿ç”¨çš„æ€»ç»“</a></li><li><a href="/blog/pm2é¡¹ç›®éƒ¨ç½²æ€»ç»“.html" class="sidebar-link">pm2 é¡¹ç›®éƒ¨ç½²æ€»ç»“</a></li><li><a href="/blog/KOAæºç çš„é˜…è¯».html" class="sidebar-link">KOA æºç çš„é˜…è¯»</a></li><li><a href="/blog/æ·±å…¥KoaåŸç†.html" class="sidebar-link">æ·±å…¥ Koa åŸç†</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯æµ‹è¯•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js_and_qa.html" class="sidebar-link">JavaScript ä¸ QA æµ‹è¯•å·¥ç¨‹å¸ˆ</a></li><li><a href="/blog/tegratedTesting.html" class="sidebar-link">JavaScript é›†æˆåŒ–æµ‹è¯•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯å·¥å…·</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/ä¸ºä»€ä¹ˆè¦ä½¿ç”¨package-lock.json.html" class="sidebar-link">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ package-lock.json</a></li><li><a href="/blog/Package.jsonä¾èµ–ç®¡ç†.html" class="sidebar-link">Package.json ä¾èµ–ç®¡ç†</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è®¡ç®—æœºç½‘ç»œ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/httpåè®®.html" class="sidebar-link">HTPP åè®®é‚£äº›äº‹</a></li><li><a href="/blog/server-po.html" class="sidebar-link">å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¿…å¤‡æœåŠ¡å™¨çŸ¥è¯†</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ“ä½œç³»ç»Ÿ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Linux.html" class="sidebar-link">Linux åŸºç¡€å…¥é—¨</a></li><li><a href="/blog/Linux_supplement.html" class="sidebar-link">Linux è¡¥å……</a></li><li><a href="/blog/Linux_web.html" class="sidebar-link">Linux ä¸­é…ç½®é™æ€ç½‘ç»œè¿æ¥</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/å‰ç«¯ä¸­çš„æ•°æ®ç»“æ„-æ’åº.html" class="sidebar-link">å‰ç«¯ä¸­çš„æ•°æ®ç»“æ„-æ’åº</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ‚è°ˆ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/æ‚è°ˆ.html" class="sidebar-link">åå°è¯­è¨€</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å¼€å‘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/å®æˆ˜1æ­¥éª¤è¯¦è§£.html" class="sidebar-link">å®æˆ˜ï¼šæ‰‹æ­ä¸€ä¸ª Reactï¼ŒTypescriptï¼ŒKoaï¼ŒGraphQL ç¯å¢ƒ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-åŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥"><a href="#vue-åŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥" class="header-anchor">#</a> vue åŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥</h1> <h2 id="ç¼–è¯‘å…¥å£"><a href="#ç¼–è¯‘å…¥å£" class="header-anchor">#</a> ç¼–è¯‘å…¥å£</h2> <p>åœ¨ä¹‹å‰åˆ†ææ•°æ®é©±åŠ¨çš„æ—¶å€™ï¼Œåœ¨ $mount è¿™ä¸ªå‡½æ•°å†…è°ƒç”¨ compileToFunctions å—ï¼Ÿä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code> const { render, staticRenderFns } = compileToFunctions(template, {
    shouldDecodeNewlines,
    shouldDecodeNewlinesForHref,
    delimiters: options.delimiters,
    comments: options.comments
  }, this)
  options.render = render
  options.staticRenderFns = staticRenderFns
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>compileToFunctions æ–¹æ³•å°±æ˜¯æŠŠæ¨¡æ¿ template ç¼–è¯‘ç”Ÿæˆ render ä»¥åŠ staticRenderFnsï¼Œå®ƒçš„å®šä¹‰åœ¨ src/platforms/web/compiler/index.js ä¸­ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>import { baseOptions } from './options'
import { createCompiler } from 'compiler/index'

const { compile, compileToFunctions } = createCompiler(baseOptions)

export { compile, compileToFunctions }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å¯ä»¥çœ‹åˆ° compileToFunctions æ–¹æ³•å®é™…ä¸Šæ˜¯ createCompiler æ–¹æ³•çš„è¿”å›å€¼ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªç¼–è¯‘é…ç½®å‚æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ createCompiler æ–¹æ³•çš„å®šä¹‰ï¼Œåœ¨ src/compiler/index.js ä¸­ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>//createCompilerCreator å…è®¸åˆ›å»ºä½¿ç”¨alternative çš„ç¼–è¯‘å™¨
//parser/optimizer/codegen, e.g the SSR optimizing compiler.
// è¿™é‡Œæˆ‘ä»¬åªæ˜¯ä½¿ç”¨é»˜è®¤éƒ¨åˆ†å¯¼å‡ºä¸€ä¸ªé»˜è®¤ç¼–è¯‘å™¨

export const createCompiler = createCompilerCreator(function baseCompile (
  template: string,
  options: CompilerOptions
): CompiledResult {
  const ast = parse(template.trim(), options)
  if (options.optimize !== false) {
    optimize(ast, options)
  }
  const code = generate(ast, options)
  return {
    ast,
    render: code.render,
    staticRenderFns: code.staticRenderFns
  }
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>é€šè¿‡ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡º createCompiler å°±æ˜¯ createCompilerCreatorï¼ˆä¼ å…¥ä¸€ä¸ª baseCompile å‡½æ•°ï¼‰ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ createCompilerCreator æ˜¯ä¸€ä¸ªä»€ä¹ˆå‘¢ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>export function createCompilerCreator (baseCompile: Function): Function {
  return function createCompiler (baseOptions: CompilerOptions) {
    function compile (
      template: string,
      options?: CompilerOptions
    ): CompiledResult {
      const finalOptions = Object.create(baseOptions)
      const errors = []
      const tips = []

      let warn = (msg, range, tip) =&gt; {
        (tip ? tips : errors).push(msg)
      }

      if (options) {
        if (process.env.NODE_ENV !== 'production' &amp;&amp; options.outputSourceRange) {
          // $flow-disable-line
          const leadingSpaceLength = template.match(/^\s*/)[0].length

          warn = (msg, range, tip) =&gt; {
            const data: WarningMessage = { msg }
            if (range) {
              if (range.start != null) {
                data.start = range.start + leadingSpaceLength
              }
              if (range.end != null) {
                data.end = range.end + leadingSpaceLength
              }
            }
            (tip ? tips : errors).push(data)
          }
        }
        // merge custom modules
        if (options.modules) {
          finalOptions.modules =
            (baseOptions.modules || []).concat(options.modules)
        }
        // merge custom directives
        if (options.directives) {
          finalOptions.directives = extend(
            Object.create(baseOptions.directives || null),
            options.directives
          )
        }
        // copy other options
        for (const key in options) {
          if (key !== 'modules' &amp;&amp; key !== 'directives') {
            finalOptions[key] = options[key]
          }
        }
      }

      finalOptions.warn = warn

      const compiled = baseCompile(template.trim(), finalOptions)
      if (process.env.NODE_ENV !== 'production') {
        detectErrors(compiled.ast, warn)
      }
      compiled.errors = errors
      compiled.tips = tips
      return compiled
    }

    return {
      compile,
      compileToFunctions: createCompileToFunctionFn(compile)
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><p>ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºæ˜¯ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°</p> <p>createCompilerCreator() =ã€‹createCompiler  =ã€‹{
compile:function(){},
compileToFunctions: createCompileToFunctionFn(compile)
}</p> <p>æœ€ç»ˆè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å±æ€§ compileToFunctions å¯¹åº”çš„å°±æ˜¯ $mount å‡½æ•°è°ƒç”¨çš„ compileToFunctions æ–¹æ³•ï¼Œå®ƒæ˜¯è°ƒç”¨ createCompileToFunctionFn æ–¹æ³•çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ createCompileToFunctionFn æ–¹æ³•ï¼Œå®ƒçš„å®šä¹‰åœ¨ src/compiler/to-function/js ä¸­ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>export function createCompileToFunctionFn (compile: Function): Function {
  const cache = Object.create(null)

  return function compileToFunctions (
    template: string,
    options?: CompilerOptions,
    vm?: Component
  ): CompiledFunctionResult {
    options = extend({}, options)
    const warn = options.warn || baseWarn
    delete options.warn

    /* istanbul ignore if */
    if (process.env.NODE_ENV !== 'production') {
      // detect possible CSP restriction
      try {
        new Function('return 1')
      } catch (e) {
        if (e.toString().match(/unsafe-eval|CSP/)) {
          warn(
            'It seems you are using the standalone build of Vue.js in an ' +
            'environment with Content Security Policy that prohibits unsafe-eval. ' +
            'The template compiler cannot work in this environment. Consider ' +
            'relaxing the policy to allow unsafe-eval or pre-compiling your ' +
            'templates into render functions.'
          )
        }
      }
    }

    // check cache
    const key = options.delimiters
      ? String(options.delimiters) + template
      : template
    if (cache[key]) {
      return cache[key]
    }

    // compile
    const compiled = compile(template, options)

    // check compilation errors/tips
    if (process.env.NODE_ENV !== 'production') {
      if (compiled.errors &amp;&amp; compiled.errors.length) {
        if (options.outputSourceRange) {
          compiled.errors.forEach(e =&gt; {
            warn(
              `Error compiling template:\n\n${e.msg}\n\n` +
              generateCodeFrame(template, e.start, e.end),
              vm
            )
          })
        } else {
          warn(
            `Error compiling template:\n\n${template}\n\n` +
            compiled.errors.map(e =&gt; `- ${e}`).join('\n') + '\n',
            vm
          )
        }
      }
      if (compiled.tips &amp;&amp; compiled.tips.length) {
        if (options.outputSourceRange) {
          compiled.tips.forEach(e =&gt; tip(e.msg, vm))
        } else {
          compiled.tips.forEach(msg =&gt; tip(msg, vm))
        }
      }
    }

    // turn code into functions
    const res = {}
    const fnGenErrors = []
    res.render = createFunction(compiled.render, fnGenErrors)
    res.staticRenderFns = compiled.staticRenderFns.map(code =&gt; {
      return createFunction(code, fnGenErrors)
    })

    // check function generation errors.
    // this should only happen if there is a bug in the compiler itself.
    // mostly for codegen development use
    /* istanbul ignore if */
    if (process.env.NODE_ENV !== 'production') {
      if ((!compiled.errors || !compiled.errors.length) &amp;&amp; fnGenErrors.length) {
        warn(
          `Failed to generate render function:\n\n` +
          fnGenErrors.map(({ err, code }) =&gt; `${err.toString()} in\n\n${code}\n`).join('\n'),
          vm
        )
      }
    }

    return (cache[key] = res)
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br></div></div><p>è‡³æ­¤æ€»ç®—æ‰¾åˆ°äº† compileToFunctions çš„æœ€ç»ˆå®šä¹‰ï¼Œå®ƒæ¥æ”¶ 3 ä¸ªå‚æ•°ã€ç¼–è¯‘æ¨¡æ¿ templateï¼Œç¼–è¯‘é…ç½® options å’Œ Vue å®ä¾‹ vmã€‚æ ¸å¿ƒçš„ç¼–è¯‘è¿‡ç¨‹å°±ä¸€è¡Œä»£ç ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code> const compiled = compile(template, options)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>compile åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ¥å±¡å±¡é€»è¾‘</p> <p>åˆšå¼€å§‹ createCompilerCreatorï¼ˆä¼ å…¥ baseCompile å‡½æ•°ï¼‰=ã€‹åˆ° createCompilerCreator è¿”å›å¯¹è±¡ {
compile:function(){},
compileToFunctions: createCompileToFunctionFn(compile)
}====ã€‹æ‰¾åˆ° compile ====ã€‹const compiled = baseCompile(template.trim(), finalOptions)</p> <p>compile å‡½æ•°æ‰§è¡Œçš„é€»è¾‘æ˜¯å…ˆå¤„ç†é…ç½®å‚æ•°ï¼ŒçœŸæ­£æ‰§è¡Œç¼–è¯‘è¿‡ç¨‹å°±ä¸€è¡Œä»£ç ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>const compiled = baseCompile(template, finalOptions)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>baseCompile åœ¨æ‰§è¡Œ createCompilerCreator æ–¹æ³•æ—¶ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>export const createCompiler = createCompilerCreator(function baseCompile (
  template: string,
  options: CompilerOptions
): CompiledResult {
  const ast = parse(template.trim(), options)
  optimize(ast, options)
  const code = generate(ast, options)
  return {
    ast,
    render: code.render,
    staticRenderFns: code.staticRenderFns
  }
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ‰€ä»¥ç¼–è¯‘çš„å…¥å£æˆ‘ä»¬ç»ˆäºæ‰¾åˆ°äº†ï¼Œå®ƒä¸»è¦å°±æ˜¯æ‰§è¡Œäº†å¦‚ä¸‹å‡ ä¸ªé€»è¾‘:</p> <p>const ast = parse(template.trim(), options) ===&gt;è§£ææ¨¡æ¿å­—ç¬¦ä¸²ç”Ÿæˆ AST</p> <p>optimize(ast, options). =====&gt;ä¼˜åŒ–è¯­æ³•æ ‘</p> <p>const code = generate(ast, options) =====ã€‹ç”Ÿæˆä»£ç </p> <h2 id="parse"><a href="#parse" class="header-anchor">#</a> parse</h2> <p>parse æ˜¯å¯¹æ¨¡ç‰ˆè§£æï¼Œç”Ÿæˆ astï¼Œå®ƒæ˜¯æŠ½è±¡è¯­æ³•æ ‘ï¼ˆæ˜¯å¯¹æºä»£ç çš„æŠ½è±¡è¯­æ³•ç»“æ„çš„æ ‘çŠ¶çš„è¡¨ç°å½¢å¼ï¼‰</p> <p>é€šè¿‡ä¸Šè¿°è¿˜æ˜¯æœ‰ç‚¹æ¨¡ç³ŠğŸ˜¢ï¼Œæ¥ä¸ªä¾‹å­ç›´è§‚ä¸€äº›ğŸ˜„ï¼š</p> <div class="language-plain line-numbers-mode"><pre class="language-text"><code>&lt;ul :class=&quot;bindCls&quot; class=&quot;list&quot; v-if=&quot;isShow&quot;&gt;
    &lt;li v-for=&quot;(item,index) in data&quot; @click=&quot;clickItem(index)&quot;&gt;{{item}}:{{index}}&lt;/li&gt;
&lt;/ul&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç»è¿‡ parse è¿‡ç¨‹åï¼Œç”Ÿæˆçš„ AST å¦‚ä¸‹ï¼š</p> <p><img src="https://wendaoshuai66.github.io/study/note/images/vue-ast.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/wendaoshuai66/blogs/edit/master/docs/blog/vueåŸç†è§£æä¹‹ç¼–è¯‘æ·±å…¥.md" target="_blank" rel="noopener noreferrer">æœ¬æ–‡æºç åœ°å€</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">2/5/2020, 1:10:59 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/vueåŸç†è§£æä¹‹æ•°æ®é©±åŠ¨.html" class="prev">
        vue åŸç†è§£æä¹‹æ•°æ®é©±åŠ¨
      </a></span> <span class="next"><a href="/blog/vueåŸç†è§£æä¹‹å“åº”å¼åŸç†æ·±å…¥.html">
        vue åŸç†è§£æä¹‹å“åº”å¼åŸç†æ·±å…¥
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7db32d51.js" defer></script><script src="/assets/js/2.1f0a0a54.js" defer></script><script src="/assets/js/47.b7479d5c.js" defer></script>
  </body>
</html>
